language: java
jdk:
- oraclejdk8
install: true
script:
- gradle zipMap
before_deploy:
- git config --global user.email "tripleabuilderbot@gmail.com" 
- git config --global user.name "tripleabuilderbot"
- export MAP_TAGGED_VERSION="$MAP_VERSION.$TRAVIS_BUILD_NUMBER"
- git tag $MAP_TAGGED_VERSION -a -m "$MAP_TAGGED_VERSION"
- git push -q https://$GITHUB_PERSONAL_ACCESS_TOKEN_FOR_TRAVIS@github.com/triplea-maps/$REPO_NAME --tags
deploy:
  provider: releases
  api_key:
    secure: HQpEeqniNI7DFM5XPcS3YZaqzKrBgSGGSJBSrc+X3pFEN5uA4+8sr0jZkYJk7fHKc23hfdyKmkpGEdLcEV6elQWDiva576h8wyr4A0fUpCXyXqH9pM12GQc+P4NRA2a2mq8tDFeAcfDpPjXMDXCmoPCmkscXGm28DaTC6GqGKc4hdrY7dLLwHJ6NHFu3iHNPEirJM+f5LWi87fvM+YkwKRsRylaNLq+rDYo7VHke2j1VnBzVhDjlUrNTTo1zvVsHQ7DaxNyUWStHeRwNhuxN7c0zQcDrCmiAN0QwPwERragd/nk59GBY12328Keg1KNBXhBlL+DcpV671DlHfFAs7PCbkSSaboYsa19FrD549thhX6Qjqqu+QKhrt3qiUhuADUFjVOASkC8Qcq/EFOCjmsKdxje5ix0sKFWSwuq2wpJsK38/08AKntw1ldWI9rEWvtD4m596PHdpVztfAzSV0/d0cY5SlQTeD/2cCUhu/J38Id8lSOr5sZrrTu4gv+9/loGozwuAgJltdnM+9MPSBnh2yjPwlX7FjPTj99l1ZdZZ9Xb6TbA888WCjeaLBa7bn6DDs023eTMFcIG8DKE2v4uTSKOqiHPnZAWfo766EKVd7DAiKyZ4dNpR47ODUIBPSZveo6A7U7B/1603vn0i8ZcwU78cRkm1tmOJeJKBNt0=
  file: "$REPO_NAME.zip"
  skip_cleanup: true
  prerelease: true
  on:
    tags: false
    all_branches: true
